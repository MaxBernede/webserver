<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Index Page</title>
</head>
<body>
    <h1>Welcome to our Webserv project</h1>
    <p>Try the following:</p>
    <ul>
        <li>What shall we call you?</li>
        <form id="cookieForm" onsubmit="setCookie(event)">
            <label for="username">Username:</label>
            <input type="text" id="username" name="username" required>
            <button type="submit">Set Nickname</button>
        </form>
        <li><a href="page1.html">Page 1 with image</a></li>
        <li><a href="page2.html">Page 2, plain text</a></li>
        <li><a href="test.html">Test methods</a></li>
        <li><a href="cgi/python.cgi">Test CGI-Python</a></li>
        <li><a href="cgi/bash.cgi">Test CGI-Bash</a></li>
    </ul>
    <p>Note: Some pages don't exist yet, that's why there is a redirection to the error page.</p>
    <p>The pages are only accessible if they are found in the html folder.</p>
</body>
<script>
    function setCookie(event) {
        event.preventDefault(); // Prevent the default form submission
        const username = document.getElementById('username').value;
        if (username) {
            const expires = new Date();
            expires.setTime(expires.getTime() + (3600 * 1000)); // 1 hour
            const expiresString = "expires=" + expires.toUTCString();
            document.cookie = `username=${username}; ${expiresString}; path=/`;
            alert('Cookie has been set!');
        } else {
            alert('Please enter a username.');
        }
    }
</script>
</html>